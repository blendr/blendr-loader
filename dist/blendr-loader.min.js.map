{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:/webpack/bootstrap a98cb7e2c67f974abdb0","webpack:///src/index.js","webpack:///src/Loadr.js","webpack:///src/Cache.js","webpack:///src/BaseLoader.js","webpack:///src/workers/AjaxWorker.js","webpack:///~/pseudo-worker/index.js","webpack:///src/LoaderManager.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","id","loaded","modules","call","m","c","p","_Loadr","window","BlendrLoader","_Loadr2","default","_Cache","_BaseLoader2","_LoaderManager","Loadr","serverUrl","cache","arguments","length","undefined","_Cache2","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","path","loaders","promiseResolve","promiseReject","self","promise","Promise","resolve","reject","manifestUrl","_get","prototype","type","src","then","manifest","get","loader","ids","onUpdate","_this2","Array","isArray","collectIds","pack","packs","dependencies","j","refId","indexOf","unshift","includes","push","i","files","managers","console","warn","manager","_LoaderManager2","fileId","file","addFile","currentIndex","loadNext","localFiles","nbFilesLoaded","nbTotalFiles","bytesLoaded","bytesTotal","localManagers","update","isComplete","onComplete","unload","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","json","_getPending","response","data","packed","Unpacker","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","audiosprite","audiosprites","urls","sprite","Cache","_AjaxWorker","_pseudoWorker","Loader","maxConcurrents","Worker","worker","URL","createObjectURL","Blob","_AjaxWorker2","_pseudoWorker2","postMessage","proxy","pendings","complete","initComplete","onmessage","event","pending","total","_update","set","onerror","e","log","_requestFile","size","cacheFile","img","Image","onload","url","nbFilesTotal","global","doEval","__pseudoworker_script","eval","PseudoWorker","executeEach","arr","fun","callErrorListener","listener","error","message","addEventListener","messageListeners","errorListeners","removeEventListener","listeners","postError","callFun","api","workerSelf","workerErrorListeners","runPostMessage","msg","workerMessageListeners","Error","terminated","script","postMessageListeners","terminate","workerPostMessage","workerAddEventListener","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","currentListeners","send","LoaderManager","end","loadr","dataFiles","unpack"],"mappings":"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","file":"blendr-loader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blendr-loader\"] = factory();\n\telse\n\t\troot[\"blendr-loader\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a98cb7e2c67f974abdb0","import BlendrLoader from './Loadr';\n//import PackLoader from './loaders/PackLoader';\n//import PackUnpacker from '../packers/pack-unpacker';\n//import PackPacker from 'pack-packer';\n//import SpriteLoader from './loaders/SpriteLoader';\n//import AudiospriteLoader from './loaders/AudiospriteLoader';\n\n//Loadr.PackLoader = PackUnpacker;\n//Loadr.SpriteLoader = SpriteLoader;\n//Loadr.AudiospriteLoader = AudiospriteLoader;\n\nwindow.BlendrLoader = BlendrLoader;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Cache from './Cache.js';\nimport BaseLoader from './BaseLoader.js';\nimport LoaderManager from './LoaderManager';\n\nexport default class Loadr extends BaseLoader {\n\n\tconstructor(serverUrl, cache = new Cache()) {\n\t\tsuper(cache);\n\n\t\tthis.serverUrl = serverUrl;\n\t\tthis.path = 'assets/';\n\n\t\tthis.loaders = [];\n\t}\n\n\tinit() {\n\t\tvar self = this;\n\n\t\tvar promiseResolve, promiseReject;\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tpromiseResolve = resolve;\n\t\t\tpromiseReject = reject;\n\t\t});\n\n\t\tvar manifestUrl = `${this.serverUrl}manifest.json`;\n\n\t\tsuper.load({\n\t\t\ttype: 'json',\n\t\t\tsrc: manifestUrl\n\t\t}).then(() => {\n\t\t\tself.manifest = self.cache.get(manifestUrl);\n\t\t\tpromiseResolve();\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tregisterLoader(type, loader) {\n\t\tthis.loaders[type] = loader;\n\t}\n\n\tload(ids, onUpdate) {\n\t\tlet promiseResolve, promiseReject;\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tpromiseResolve = resolve;\n\t\t\tpromiseReject = reject;\n\t\t});\n\n\t\tif(!Array.isArray(ids)) {\n\t\t\tids = [ids];\n\t\t}\n\n\t\t// collect all dependencies\n\t\tlet collectIds = (id) => {\n\t\t\tlet pack = this.manifest.packs[id];\n\n\t\t\tif(pack.dependencies) {\n\t\t\t\tfor(let j=0; j<pack.dependencies.length; j++) {\n\t\t\t\t\tlet refId = pack.dependencies[j];\n\n\t\t\t\t\tif(ids.indexOf(refId) < 0) {\n\t\t\t\t\t\tids.unshift(refId);\n\t\t\t\t\t\tcollectIds(refId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(pack.includes) {\n\t\t\t\tfor(let j=0; j<pack.includes.length; j++) {\n\t\t\t\t\tlet refId = pack.includes[j];\n\n\t\t\t\t\tif(ids.indexOf(refId) < 0) {\n\t\t\t\t\t\tids.push(refId);\n\t\t\t\t\t\tcollectIds(refId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\tlet id = ids[i];\n\t\t\tcollectIds(id);\n\t\t}\n\n\t\t// create managers\n\t\tlet files = {};\n\t\tlet managers = {};\n\n\t\t// collect files & managers for each pack\n\t\tfor(let i=0; i<ids.length; i++) {\n\t\t\tlet id = ids[i];\n\t\t\tlet pack = this.manifest.packs[id];\n\n\t\t\tif(!this.loaders[pack.type]) {\n\t\t\t\tconsole.warn('unknown pack type: ' + pack.type);\n\t\t\t}\n\n\t\t\t//if(!pack.loader || !this.loaders[pack.loader])\n\t\t\t//\tcontinue;\n\n\t\t\tfiles[id] = [];\n\t\t\tmanagers[id] = [];\n\n\t\t\tlet manager = new LoaderManager(pack, this.loaders[pack.type], id);\n\t\t\tmanagers[id].push(manager);\n\n\t\t\tif(pack.files) {\n\t\t\t\tfor (let fileId in pack.files) {\n\t\t\t\t\tlet file = pack.files[fileId];\n\n\t\t\t\t\tlet src = `${this.serverUrl}${file}`;\n\t\t\t\t\tmanager.addFile(fileId, src);\n\t\t\t\t\tfiles[id].push({\n\t\t\t\t\t\tsrc: src,\n\t\t\t\t\t\ttype: this.manifest.files[file].type\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// request files\n\t\tlet currentIndex = 0;\n\t\tlet loadNext = () => {\n\t\t\tif(currentIndex < ids.length) {\n\t\t\t\tlet id = ids[currentIndex++];\n\t\t\t\tlet localFiles = files[id];\n\n\t\t\t\tsuper.load(localFiles, (nbFilesLoaded, nbTotalFiles, bytesLoaded, bytesTotal) => {\n\t\t\t\t\tlet localManagers = managers[id];\n\n\t\t\t\t\tfor (let i = 0; i < localManagers.length; i++) {\n\t\t\t\t\t\tlet manager = localManagers[i];\n\t\t\t\t\t\tmanager.update(localFiles);\n\n\t\t\t\t\t\tif (manager.isComplete()) {\n\t\t\t\t\t\t\tmanager.onComplete(localFiles, this, id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (onUpdate) {\n\t\t\t\t\t\tonUpdate(nbFilesLoaded, nbTotalFiles, bytesLoaded, bytesTotal);\n\t\t\t\t\t}\n\t\t\t\t}).then(() => {\n\t\t\t\t\tloadNext();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tpromiseResolve();\n\t\t\t}\n\t\t};\n\t\tloadNext();\n\n\t\treturn promise;\n\t}\n\n\tunload(id) {\n\t\tfor(let type in this.loaders) {\n\t\t\tlet loader = this.loaders[type];\n\n\t\t\tloader.unload(id, this.cache);\n\t\t}\n\t}\n\n\t_extractPacks() {\n\t\tfor (var pack of this.manifest.pack) {\n\t\t\tvar json = this._getPending(this.serverUrl + `assets/pack/${pack}.json`).response;\n\t\t\tvar data = this._getPending(this.serverUrl + `assets/pack/${pack}.pack`).response;\n\n\t\t\tvar packed = new Unpacker(data, json);\n\n\t\t\tthis.packs[pack] = packed;\n\t\t}\n\t}\n\n\t_extractAudiosprites() {\n\t\tfor (var audiosprite of this.manifest.audiosprite) {\n\t\t\tvar json = this._getPending(this.serverUrl + `assets/audiosprite/${audiosprite}.json`).response;\n\n\t\t\tthis.audiosprites[audiosprite] = {\n\t\t\t\turls: [`assets/audiosprite/${audiosprite}.ogg`, `assets/audiosprite/${audiosprite}.mp3`],\n\t\t\t\tsprite: json.sprite\n\t\t\t};\n\t\t}\n\t}\n\n\tgetPack(id) {\n\t\treturn this.packs[id];\n\t}\n\n\tgetAudiosprite(id) {\n\t\treturn this.audiosprites[id];\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Loadr.js","export default class Cache {\n\n\tconstructor() {\n\t\tthis.cache = [];\n\t}\n\n\tget(id) {\n\t\treturn this.cache[id];\n\t}\n\n\tset(id, data) {\n\t\tthis.cache[id] = data;\n\t\treturn data;\n\t}\n\n\tremove(id) {\n\t\tlet data = this.cache[id];\n\t\tdelete this.cache[id];\n\t\treturn data;\n\t}\n\n\tclear() {\n\t\tthis.cache = [];\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Cache.js","import Cache from './Cache.js';\n\n// load ajax worker\n//import WebWorkify from 'webworkify';\n//import AjaxWorkerScript from 'raw!./workers/AjaxWorker.txt';\n//import AjaxWorker from 'worker!./workers/AjaxWorker.js';\n//import webworkify from 'webworkify-webpack';\nimport AjaxWorkerScript from 'raw!./workers/AjaxWorker.js';\n\n// web worker alternative\n//import DirectAjax from './DirectAjax';\n\n// waiting for bug fix\nimport PseudoWorker from 'pseudo-worker';\n\nexport default class Loader {\n\n\tconstructor(cache) {\n\t\tthis.maxConcurrents = 4;\n\t\tthis.cache = cache;\n\n\t\tif(window.Worker) {\n\t\t\t//this.worker = new AjaxWorker();\n\t\t\t//this.worker = new WebWorkify(require('./workers/AjaxWorker.js'));\n\t\t\t//this.worker = webworkify(require.resolve('./workers/AjaxWorker.js'));\n\t\t\tthis.worker = new Worker(window.URL.createObjectURL(new Blob([AjaxWorkerScript])));\n\t\t} else {\n\t\t\t//this.worker = new DirectAjax();\n\t\t\tthis.worker = new PseudoWorker(window.URL.createObjectURL(new Blob([AjaxWorkerScript])));\n\t\t}\n\n\t\tthis.worker.postMessage({\n\t\t\tproxy: 'max',\n\t\t\tdata: this.maxConcurrents\n\t\t});\n\n\t\tthis.pendings = [];\n\t}\n\n\tload(files, onUpdate) {\n\t\tvar self = this;\n\n\t\tif(!Array.isArray(files)) {\n\t\t\tfiles = [files];\n\t\t}\n\n\t\tthis.worker.postMessage({\n\t\t\tproxy: 'abort'\n\t\t});\n\n\t\tthis.complete = false;\n\t\tthis.initComplete = false;\n\t\tthis.pendings = [];\n\t\tthis.onUpdate = onUpdate;\n\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tself.promiseResolve = resolve;\n\t\t\tself.promiseReject = reject;\n\t\t});\n\n\t\tthis.worker.onmessage = (event) => {\n\t\t\tvar data = event.data;\n\t\t\tvar pending = self._getPending(data.data.src);\n\n\t\t\tswitch(data.proxy) {\n\t\t\t\tcase 'filesize':\n\t\t\t\t\tpending.total = data.data.total;\n\t\t\t\t\tself._update();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'onprogress':\n\t\t\t\t\tpending.loaded = data.data.loaded;\n\t\t\t\t\tself._update();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'oncomplete':\n\t\t\t\t\tpending.loaded = pending.total;\n\t\t\t\t\tpending.response = data.data.response;\n\t\t\t\t\tpending.complete = true;\n\n\t\t\t\t\t// cache data\n\t\t\t\t\tif(self.cache) {\n\t\t\t\t\t\tself.cache.set(pending.src, pending.response);\n\t\t\t\t\t}\n\n\t\t\t\t\tself._update(true);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\tthis.worker.onerror = (e) => {\n\t\t\tconsole.log(e);\n\t\t};\n\n\t\tthis.initComplete = true;\n\t\tfor(var i = 0; i < files.length; i++) {\n\t\t\tthis._requestFile(files[i]);\n\t\t}\n\n\t\t// force update in case all files are in the cache\n\t\tthis._update(true);\n\n\t\treturn promise;\n\t}\n\n\t_requestFile(file) {\n\t\tlet self = this;\n\n\t\t// prevent same file requests\n\t\tif(this._getPending(file.src)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet pending = {\n\t\t\tsrc: file.src,\n\t\t\tloaded: 0,\n\t\t\ttotal: file.size ? file.size : 0\n\t\t};\n\t\tfile.pending = pending;\n\t\tthis.pendings.push(pending);\n\n\t\t// check cache data\n\t\tif(this.cache) {\n\t\t\tlet cacheFile = this.cache.get(file.src);\n\n\t\t\tif (cacheFile) {\n\t\t\t\tpending.loaded = pending.total;\n\t\t\t\tpending.complete = true;\n\t\t\t\tpending.response = cacheFile;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// special case for images\n\t\tif(file.type == 'image') {\n\t\t\tlet img = new Image();\n\t\t\timg.onload = function () {\n\t\t\t\tpending.loaded = pending.total;\n\t\t\t\tpending.response = img;\n\t\t\t\tpending.complete = true;\n\t\t\t\tself.cache.set(file.src, img);\n\t\t\t\tself._update(true);\n\t\t\t};\n\t\t\timg.src = file.src;\n\t\t} else if(file.type == 'manual') {\n\t\t\t// no action on manual files\n\t\t} else {\n\t\t\t// otherwise standard ajax\n\t\t\tthis.worker.postMessage({\n\t\t\t\tproxy: 'load',\n\t\t\t\tdata: {\n\t\t\t\t\tsrc: file.src,\n\t\t\t\t\ttype: file.type\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_getPending(url) {\n\t\tfor(let i=0; i<this.pendings.length; i++) {\n\t\t\tlet pending = this.pendings[i];\n\t\t\tif(pending.src == url) {\n\t\t\t\treturn pending;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_forceLoaded(url, data) {\n\t\tfor(let i=0; i<this.pendings.length; i++) {\n\t\t\tlet pending = this.pendings[i];\n\n\t\t\tif(pending.src == url) {\n\t\t\t\tpending.loaded = pending.total;\n\t\t\t\tpending.response = data;\n\t\t\t\tpending.complete = true;\n\n\t\t\t\t// cache data\n\t\t\t\tif(this.cache && data) {\n\t\t\t\t\tthis.cache.set(pending.src, pending.response);\n\t\t\t\t}\n\n\t\t\t\tthis._update(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_update(complete = false) {\n\t\tvar loaded = 0;\n\t\tvar total = 0;\n\t\tvar nbFilesLoaded = 0;\n\t\tvar nbFilesTotal = 0;\n\n\t\tfor(let i=0; i<this.pendings.length; i++) {\n\t\t\tlet pending = this.pendings[i];\n\t\t\tif(pending.total > 0 || pending.complete) {\n\t\t\t\tloaded += pending.loaded;\n\t\t\t\ttotal += pending.total;\n\t\t\t\tnbFilesTotal++;\n\n\t\t\t\tif(pending.loaded >= pending.total) {\n\t\t\t\t\tnbFilesLoaded++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// only call onUpdate if all files have a length\n\t\tif(this.onUpdate && this.initComplete && !this.complete && nbFilesTotal == this.pendings.length) {\n\t\t\tthis.onUpdate(nbFilesLoaded, this.pendings.length, loaded, total);\n\t\t}\n\n\n\t\tif(nbFilesLoaded == this.pendings.length && complete && !this.complete) {\n\t\t\tthis.complete = true;\n\t\t\tthis.promiseResolve();\n\t\t}\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseLoader.js","module.exports = \"\\\"use strict\\\";\\n\\nvar maxConcurrents = 1;\\n\\nself.onmessage = function (e) {\\n\\tswitch (e.data.proxy) {\\n\\t\\tcase \\\"load\\\":\\n\\t\\t\\tpending.push(e.data.data);\\n\\t\\t\\tcheckPendingRequests();\\n\\t\\t\\tbreak;\\n\\t\\tcase \\\"abort\\\":\\n\\t\\t\\tonAbort(e.data);\\n\\t\\t\\tbreak;\\n\\t\\tcase \\\"max\\\":\\n\\t\\t\\tmaxConcurrents = e.data.data;\\n\\t}\\n};\\n\\nfunction checkPendingRequests() {\\n\\twhile (xhrs.length < maxConcurrents && pending.length > 0) {\\n\\t\\tvar data = pending.shift();\\n\\n\\t\\tnew XHRRequest(data, onComplete);\\n\\t}\\n}\\n\\nvar xhrs = [];\\nvar pending = [];\\n\\nfunction onComplete(xhr, response) {\\n\\tfor (var i = 0, l = xhrs.length; i < l; i++) {\\n\\t\\tif (xhrs[i].src == xhr.url) {\\n\\t\\t\\txhrs.splice(i, 1);\\n\\t\\t\\tvar message = JSON.parse(JSON.stringify({ proxy: \\\"oncomplete\\\", data: { src: xhr.url } }));\\n\\t\\t\\tmessage.data.response = response;\\n\\t\\t\\tself.postMessage(message);\\n\\n\\t\\t\\tcheckPendingRequests();\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n}\\n\\nfunction onAbort(event) {\\n\\tvar i = xhrs.length;\\n\\twhile (i--) {\\n\\t\\tif (!event.file || xhrs[i].src == event.file.src) {\\n\\t\\t\\txhrs[i].xhr.abort();\\n\\t\\t\\txhrs.splice(i, 1);\\n\\t\\t}\\n\\t}\\n\\n\\tpending = [];\\n}\\n\\nfunction XHRRequest(data, callback) {\\n\\t/*\\n  //x = new(XMLHttpRequest)();// || ActiveXObject)('MSXML2.XMLHTTP.3.0');\\n  var x = new XMLHttpRequest();\\n  x.open('GET', data.src, 1);\\n  x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\\n  x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\\n  x.onreadystatechange = function () {\\n  console.log(this.readyState);\\n  //x.readyState > 3 && callback && callback(x.responseText, x);\\n  };\\n  x.send(null);\\n  */\\n\\tvar url = data.src;\\n\\tthis.url = url;\\n\\n\\tvar xhr = void 0;\\n\\ttry {\\n\\t\\txhr = new XDomainRequest();\\n\\t} catch (e) {\\n\\t\\txhr = new XMLHttpRequest();\\n\\t}\\n\\n\\txhrs.push({ src: data.src, xhr: xhr });\\n\\n\\tvar clean = function clean() {\\n\\t\\txhr.onload = null;\\n\\t\\txhr.onabort = null;\\n\\t\\txhr.onprogress = null;\\n\\t\\tcallback = null;\\n\\t\\txhr = null;\\n\\t};\\n\\n\\txhr.open(\\\"GET\\\", data.src, true);\\n\\n\\t// check if supports json\\n\\tvar supportsJson = true;\\n\\tif (data.type && data.type.toLowerCase() == 'json') {\\n\\t\\txhr.responseType = 'json';\\n\\t\\tsupportsJson = 'response' in xhr && xhr.responseType == 'json';\\n\\t}\\n\\n\\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\\n\\txhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\\n\\txhr.onprogress = function (event) {\\n\\t\\tvar obj = JSON.parse(JSON.stringify({ proxy: \\\"onprogress\\\", data: { loaded: event.loaded, total: event.total, src: event.target.url } }));\\n\\t\\tself.postMessage(obj);\\n\\t};\\n\\txhr.onload = function () {\\n\\t\\tif (xhr.readyState < 4 || xhr.status !== 200) {\\n\\t\\t\\tclean();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (xhr.readyState === 4 && callback) {\\n\\t\\t\\tvar response = xhr.response;\\n\\n\\t\\t\\t// type json but not supported\\n\\t\\t\\tif (!supportsJson) {\\n\\t\\t\\t\\tresponse = JSON.parse(xhr.responseText);\\n\\t\\t\\t}\\n\\n\\t\\t\\tcallback(xhr, response);\\n\\t\\t\\tclean();\\n\\t\\t}\\n\\t};\\n\\txhr.onabort = function () {\\n\\t\\tclean();\\n\\t};\\n\\txhr.url = url;\\n\\n\\t// handle filesize\\n\\txhr.onreadystatechange = function () {\\n\\t\\tif (this.readyState == 2) {\\n\\t\\t\\tvar filesize = parseInt(xhr.getResponseHeader(\\\"Content-Length\\\"));\\n\\n\\t\\t\\tvar obj = JSON.parse(JSON.stringify({ proxy: \\\"filesize\\\", data: { loaded: 0, total: filesize, src: url } }));\\n\\t\\t\\tself.postMessage(obj);\\n\\t\\t}\\n\\t};\\n\\n\\txhr.responseType = data.type || 'text';\\n\\txhr.send(null);\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/workers/AjaxWorker.js\n// module id = 4\n// module chunks = 0","'use strict';\n\nfunction doEval(self, __pseudoworker_script) {\n  /* jshint unused:false */\n  (function () {\n    /* jshint evil:true */\n    eval(__pseudoworker_script);\n  }).call(global);\n}\n\nfunction PseudoWorker(path) {\n  var messageListeners = [];\n  var errorListeners = [];\n  var workerMessageListeners = [];\n  var workerErrorListeners = [];\n  var postMessageListeners = [];\n  var terminated = false;\n  var script;\n  var workerSelf;\n\n  var api = this;\n\n  // custom each loop is for IE8 support\n  function executeEach(arr, fun) {\n    var i = -1;\n    while (++i < arr.length) {\n      if (arr[i]) {\n        fun(arr[i]);\n      }\n    }\n  }\n\n  function callErrorListener(err) {\n    return function (listener) {\n      listener({\n        type: 'error',\n        error: err,\n        message: err.message\n      });\n    };\n  }\n\n  function addEventListener(type, fun) {\n    /* istanbul ignore else */\n    if (type === 'message') {\n      messageListeners.push(fun);\n    } else if (type === 'error') {\n      errorListeners.push(fun);\n    }\n  }\n\n  function removeEventListener(type, fun) {\n      var listeners;\n      /* istanbul ignore else */\n      if (type === 'message') {\n        listeners = messageListeners;\n      } else if (type === 'error') {\n        listeners = errorListeners;\n      } else {\n        return;\n      }\n      var i = -1;\n      while (++i < listeners.length) {\n        var listener = listeners[i];\n        if (listener === fun) {\n          delete listeners[i];\n          break;\n        }\n      }\n  }\n\n  function postError(err) {\n    var callFun = callErrorListener(err);\n    if (typeof api.onerror === 'function') {\n      callFun(api.onerror);\n    }\n    if (workerSelf && typeof workerSelf.onerror === 'function') {\n      callFun(workerSelf.onerror);\n    }\n    executeEach(errorListeners, callFun);\n    executeEach(workerErrorListeners, callFun);\n  }\n\n  function runPostMessage(msg) {\n    function callFun(listener) {\n      try {\n        listener({data: msg});\n      } catch (err) {\n        postError(err);\n      }\n    }\n\n    if (workerSelf && typeof workerSelf.onmessage === 'function') {\n      callFun(workerSelf.onmessage);\n    }\n    executeEach(workerMessageListeners, callFun);\n  }\n\n  function postMessage(msg) {\n    if (typeof msg === 'undefined') {\n      throw new Error('postMessage() requires an argument');\n    }\n    if (terminated) {\n      return;\n    }\n    if (!script) {\n      postMessageListeners.push(msg);\n      return;\n    }\n    runPostMessage(msg);\n  }\n\n  function terminate() {\n    terminated = true;\n  }\n\n  function workerPostMessage(msg) {\n    function callFun(listener) {\n      listener({\n        data: msg\n      });\n    }\n    if (typeof api.onmessage === 'function') {\n      callFun(api.onmessage);\n    }\n    executeEach(messageListeners, callFun);\n  }\n\n  function workerAddEventListener(type, fun) {\n    /* istanbul ignore else */\n    if (type === 'message') {\n      workerMessageListeners.push(fun);\n    } else if (type === 'error') {\n      workerErrorListeners.push(fun);\n    }\n  }\n\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', path);\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n      if (xhr.status >= 200 && xhr.status < 400) {\n        script = xhr.responseText;\n        workerSelf = {\n          postMessage: workerPostMessage,\n          addEventListener: workerAddEventListener,\n        };\n        doEval(workerSelf, script);\n        var currentListeners = postMessageListeners;\n        postMessageListeners = [];\n        for (var i = 0; i < currentListeners.length; i++) {\n          runPostMessage(currentListeners[i]);\n        }\n      } else {\n        postError(new Error('cannot find script ' + path));\n      }\n    }\n  };\n\n  xhr.send();\n\n  api.postMessage = postMessage;\n  api.addEventListener = addEventListener;\n  api.removeEventListener = removeEventListener;\n  api.terminate = terminate;\n\n  return api;\n}\n\nmodule.exports = PseudoWorker;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pseudo-worker/index.js\n// module id = 5\n// module chunks = 0","export default class LoaderManager {\n\n\tconstructor(type, loader) {\n\t\tthis.type = type;\n\t\tthis.loader = loader;\n\t\tthis.files = {};\n\t}\n\n\tunload() {\n\t}\n\n\tupdate(files) {\n\t\tif(!this.end) {\n\t\t\tlet complete = true;\n\n\t\t\t// check if requested files are all loaded\n\t\t\tfor (let url in this.files) {\n\t\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\t\tif (url == files[i].src) {\n\t\t\t\t\t\tif (!files[i].pending.complete) {\n\t\t\t\t\t\t\tcomplete = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.complete = complete;\n\t\t}\n\t}\n\n\taddFile(id, url) {\n\t\tthis.files[url] = id;\n\t}\n\n\tonComplete(files, loadr, id) {\n\t\tif(this.loader && !this.end) {\n\t\t\tthis.end = true;\n\n\t\t\t// gather files\n\t\t\tlet dataFiles = {};\n\t\t\tfor(let i=0; i<files.length; i++) {\n\t\t\t\tlet file = files[i];\n\n\t\t\t\tif(this.files[file.src]) {\n\t\t\t\t\tdataFiles[this.files[file.src]] = files[i].pending.response;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//for(let id in this.files) {\n\t\t\t//\tlet url = this.files[id];\n\t\t\t//}\n\n\t\t\tif(this.loader.unpack) {\n\t\t\t\tthis.loader.unpack(id, dataFiles, loadr.cache, loadr.manifest, loadr);\n\t\t\t} else {\n\t\t\t\tthis.loader.onComplete(dataFiles, loadr, id);\n\t\t\t}\n\t\t}\n\t}\n\n\tisComplete() {\n\t\treturn this.complete;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/LoaderManager.js"]}